"use strict";var addOrEditButton=document.getElementById("addOrEditEdit"),removeButton=document.querySelector(".deleteConfirmationPrompt .deleteButton"),deleteConfirmationPromptBg=document.querySelector(".deleteConfirmationPromptBg"),changeForm=document.querySelector("#changeForm"),users=loadUsers(),userKeys=["name","lastName","password","age","email","phoneNumber","cardNumber"],showChangeForm=function(e,t){var n=document.querySelector("#formTitle"),a=document.querySelector(".changeFormBg");e?(changeForm.setAttribute("data-id",t.id),n.innerHTML="Изменить пользователя",userKeys.forEach(function(e){document.querySelector('input[name="'.concat(e,'"]')).value=t[e]}),addOrEditButton.value="Сохранить"):(addOrEditButton.value="Добавить",n.innerHTML="Добавить пользователя"),changeElementDisplay(a,"block")},askDeleteConfirmation=function(e){var t=document.querySelector(".deleteUserText");document.querySelector(".deleteConfirmationPrompt").setAttribute("id",e.id),removeButton.setAttribute("data-id",e.id),t.innerHTML="Вы точно хотите удалить пользователя <b>".concat(e.name,"</b>?"),changeElementDisplay(deleteConfirmationPromptBg,"block")},addOrEditUserHandler=function(e,t){var n,a=document.forms.changeForm,r=e.target.parentNode.getAttribute("data-id"),o=users.findIndex(function(e){return e.id==r}),e=t?"отредактировали":"добавили",l=findInvalidFormInputs(),e="Вы успешно ".concat(e," пользователя");l.length?(changeInvalidFieldClass(l,!0),changeElementDisplay(".inputRequired","block")):(n={id:r||Date.now().toString(36),name:a.elements.name.value,lastName:a.elements.lastName.value,password:a.elements.password.value,age:a.elements.age.value,email:a.elements.email.value,phoneNumber:a.elements.phoneNumber.value,cardNumber:a.elements.cardNumber.value},(t?(document.querySelector('div[data-row-id="'.concat(r,'"] div')).innerHTML="".concat(n.name," ").concat(n.lastName),userKeys.forEach(function(e){users[o][e]!==n[e]&&(users[o][e]=n[e])}),viewUserHandler):(users.push(n),e+=" <b>".concat(n.name," ").concat(n.lastName,"</b>"),changeElementDisplay(".noUsers","none"),addUserToList))(n),localStorage.setItem("users",JSON.stringify(users)),changeElementDisplay(".changeFormBg","none"),document.querySelector("#changeForm").reset(),changeForm.removeAttribute("data-id"),l={click:{callback:closeModal,isOnCapture:!0}},a=createElement("div","",{className:"modalBg"},l,"body"),createElement("div",e,{className:"modalContent"},null,a))},showUsersListHeader=function(){var e=createElement("div","",null,null,"#usersList");createElement("div","<b>Полное имя</b>",null,null,e),createElement("div","<b>Действия</b>",null,null,e)},viewUserHandler=function(e){document.querySelector("#userView").innerHTML="\n  <h3>Информация о пользователе</h3>\n  <p><b>ID: </b>".concat(e.id,"</p>\n  <p><b>Имя: </b>").concat(e.name," ").concat(e.lastName,"</p>\n  <p><b>Пароль: </b>").concat(e.password,"</p>\n  <p><b>Возраст: </b>").concat(e.age,"</p>\n  <p><b>Email: </b>").concat(e.email,"</p>\n  <p><b>Номер телефона: </b>").concat(e.phoneNumber,"</p>\n  <p><b>Номер банковской карты: </b>").concat(e.cardNumber,"</p>"),changeElementDisplay("#userView","block")},deleteUserHandler=function(t){var e=users.findIndex(function(e){return e.id==t});users.length&&users[e].id!==t||changeElementDisplay("#userView","none"),users.splice(e,1),localStorage.setItem("users",JSON.stringify(users)),removeElement('div[data-row-id="'.concat(t,'"')),users.length||changeElementDisplay(".noUsers","block")},handleUserButtonsClick=function(e){var t=e.target.getAttribute("name"),n=e.target.getAttribute("data-id"),e=users.find(function(e){return e.id==n});"view"===t?viewUserHandler(e):"edit"===t?showChangeForm(!0,e):"delete"===t&&askDeleteConfirmation(e)},showUserButtons=function(e,t){t=createElement("div","",null,{click:{callback:handleUserButtonsClick,isOnCapture:!0}},t);createElement("input","",{className:"button",value:"Подробности",type:"button",name:"view","data-id":e.id},null,t),createElement("input","",{className:"button",value:"Редактировать",type:"button",name:"edit","data-id":e.id},null,t),createElement("input","",{className:"button red-button",value:"Удалить",type:"button",name:"delete","data-id":e.id},null,t)},showUsersList=function(){var e=document.querySelector("#usersList");createElement("div","Пользователей пока нет",{className:"noUsers hidden"},null,e),users.length||changeElementDisplay(".noUsers","block"),users.forEach(function(e){return addUserToList(e)})},showUsers=function(){showUsersListHeader(),showUsersList()};window.addEventListener("load",function(){showUsers()}),document.querySelectorAll("#changeForm input").forEach(function(e){e.addEventListener("change",invalidFieldHandler)}),window.addEventListener("click",function(e){e.target.classList.contains("modalBg")&&(e.target.firstElementChild.getAttribute("data-id")&&changeForm.removeAttribute("data-id"),closeModal(e,!0))}),removeButton.addEventListener("click",function(e){e=e.target.getAttribute("data-id");deleteUserHandler(e),changeElementDisplay(deleteConfirmationPromptBg,"none")}),document.querySelectorAll(".backButton").forEach(function(e){return e.addEventListener("click",function(e){e=e.target.parentNode;changeElementDisplay(e.closest(".modalBg"),"none")})}),document.querySelector(".showChangeForm").addEventListener("click",function(){showChangeForm()}),addOrEditButton.addEventListener("click",function(e){"Сохранить"===(action=addOrEditButton.getAttribute("value"))?addOrEditUserHandler(e,!0):"Добавить"===action&&addOrEditUserHandler(e)});
"use strict";var initialUsers=[{id:"lf74s4tb",name:"John",lastName:"Smith",password:"greatpassword1",age:"15",email:"john.smith@gmail.com",phoneNumber:"380639887339",cardNumber:"4485 9065 7554 1192"},{id:"lf74s4td",name:"Jack",lastName:"Daniels",password:"greatpassword2",age:"16",email:"jack.daniels@gmail.com",phoneNumber:"380639647387",cardNumber:"4485 9065 7554 2292"},{id:"lf74s4t3",name:"Stacie",lastName:"Jackson",password:"greatpassword3",age:"17",email:"stacie.jackson@gmail.com",phoneNumber:"380639557486",cardNumber:"4485 9065 7554 3392"}];
"use strict";var createElement=function(e,t,n,r,c){var o,i,c="string"==typeof c?document.querySelector(c):c,u=document.createElement(e);for(o in u.innerHTML=t,n)"className"===o?u.setAttribute("class",n[o]):u.setAttribute(o,n[o]);for(i in r)u.addEventListener(i,r[i].callback,r[i].isOnCapture);return c.appendChild(u),u},clearContent=function(e){document.querySelector(e).innerHTML=""},removeElement=function(e){("string"==typeof e?document.querySelector(e):e).remove()},changeElementDisplay=function(e,t){("string"==typeof e?document.querySelector(e):e).style.display=t};
"use strict";var _this=void 0,findInvalidFormInputs=function(){return document.querySelectorAll("#changeForm input:invalid")},invalidFieldHandler=function(e){!0===e.target.checkValidity()?e.target.classList.remove("invalid"):e.target.classList.add("invalid"),0===findInvalidFormInputs().length&&changeElementDisplay(document.querySelector(".inputRequired"),"none")},changeInvalidFieldClass=function(e,n){!0===n?e.forEach(function(e){return e.classList.add("invalid")}):e.forEach(function(e){return e.classList.remove("invalid")})},closeModal=function(e,n){e.target!==_this&&!1===n||(changeElementDisplay(".inputRequired","none"),findInvalidFormInputs()&&changeInvalidFieldClass(findInvalidFormInputs()),resetForm(),changeElementDisplay(e.target,"none"))},addUserToList=function(e){var n=createElement("div","",{className:"userWrapper","data-row-id":e.id},null,"#usersList"),t="".concat(e.name," ").concat(e.lastName);createElement("div",t,null,null,n),showUserButtons(e,n)},loadUsers=function(){var e=JSON.parse(localStorage.getItem("users"));return null===e?(localStorage.setItem("users",JSON.stringify(initialUsers)),JSON.parse(localStorage.getItem("users"))):e};